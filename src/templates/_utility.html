{% import "_includes/forms" as forms %}

{{ driverHtml|raw }}

{% for action in actions %}
    {% if currentUser.can('blitz:' ~ action.id) %}
        <form class="utility" method="post" accept-charset="UTF-8">
            <input type="hidden" name="action" value="blitz/cache/{{ action.id }}">
            <input type="hidden" name="utility" value="1">

            {{ redirectInput('utilities/blitz-cache') }}
            {{ csrfInput() }}

            <p class="light">{{ action.instructions|t('blitz') }}</p>

            {% if action.id == 'refresh-urls' %}

                {% set cols = [{
                    type: 'singleline',
                    heading: 'Cached URLs'|t('blitz'),
                    placeholder: 'https://domain.com/page-to-refresh',
                    code: true,
                }] %}
                {{ forms.editableTableField({
                    instructions: action.instructions|t('blitz'),
                    name: 'urls',
                    id: 'urls',
                    cols: cols,
                    rows: [],
                    addRowLabel: "Add a URL"|t('blitz'),
                }) }}

            {% elseif action.id == 'refresh-tagged' %}

                {% set cols = [{
                    type: 'singleline',
                    heading: 'Tags'|t('blitz'),
                    placeholder: 'tag-to-refresh',
                    suggestions: tagSuggestions,
                    code: true,
                }] %}
                {{ forms.editableTableField({
                    instructions: action.instructions|t('blitz'),
                    name: 'tags',
                    id: 'tags',
                    cols: cols,
                    rows: [],
                    addRowLabel: "Add a Tag"|t('blitz'),
                }) }}

            {% endif %}

            <input type="submit" class="btn submit" value="{{ action.label|t('blitz') }}" />
        </form>
        <br>
    {% endif %}
{% endfor %}
